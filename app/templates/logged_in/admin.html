{% extends "base_logged_in.html" %}

{% block scripts %}
<script>
    $('#submit').on('click', function () {
        $(this).button('loading')
    });
    
    if ($('#showSearch').is(':checked')) {
    $("#searchForm").show();
    $("#show-search-btn").addClass("icon-delete");
    $("#show-search-btn").addClass("btn-default");
  }
  else {
    $("#show-search-btn").addClass("icon-plus");
    $("#show-search-btn").addClass("btn-success");
    $("#searchForm").hide();
  }
  
  $("#show-search-btn").on('click', function(event) {
    event.preventDefault();
    $("#searchForm").toggle();
    $('#showSearch').prop("checked", !$('#showSearch').prop("checked"));
    $("#show-search-btn").toggleClass("icon-plus");
    $("#show-search-btn").toggleClass("btn-default")
    $("#show-search-btn").toggleClass("icon-delete");
    $("#show-search-btn").toggleClass("btn-success")
    $("#show-search-btn").blur();
  });
  
</script>
{% endblock %}

{% block header %}<h1> {{ title }}</h1>{% endblock %}

{% block content %}
<div class="well" style="padding-top: 50px; padding-right: 50px; padding-left:50px">
      
    <!-- FORM -->
    
    <legend class="pull-left" style="width: auto">Generate Report</legend>
    <button class="btn pull-right" id="show-search-btn"></button>
    <div class="clearfix"></div>
    
    <form action="" method="post" name="submit" id="searchForm">
    {{ form.hidden_tag() }}
    
    <div class="search-field">
        {{ form.user.label(class="control-label") }}
        {{ form.user(class="form-control input-sm") }}
        {% if form.user.errors %}
            <span class="text-danger help-block">{{ form.user.errors[0] }}</span>
        {% endif %}
    </div>
    
    <div class="search-field">
        {{ form.subject.label(class="control-label") }}
        {{ form.subject(class="form-control input-sm") }}
        {% if form.subject.errors %}
            <span class="text-danger help-block">{{ form.user.errors[0] }}</span>
        {% endif %}
    </div>
    
    <div class="search-field">
        <div style="display: inline-block; width: 150px">
        {{ form.dateAfter.label(class="control-label") }}
        {{ form.dateAfter(class="form-control input-sm", placeholder="yyyy-mm-dd") }}
        </div><div style="display: inline-block; margin-left: 50px;">
        {{ form.dateBefore.label(class="control-label") }}
        {{ form.dateBefore(class="form-control input-sm", style="width: 150px", placeholder="yyyy-mm-dd") }}
        </div>
        <div class="clearfix""> </div>
        {% if form.dateAfter.errors %}
            <span class="text-danger help-block">{{ form.dateAfter.errors[0] }}</span>
        {% elif  form.dateBefore.errors %}
             <span class="text-danger help-block">{{ form.dateBefore.errors[0] }}</span>
        {% endif %}
    </div>
    
    <div class="search-field">
        {{ form.hierarchy.label(class="control-label") }}
        {{ form.hierarchy(class="form-control input-sm") }}
        {% if form.subject.errors %}
            <span class="text-danger help-block">{{ form.hierarchy.errors[0] }}</span>
        {% endif %}
    </div>
    
    <div class="search-field">
    <div class="pull-right" style="margin-top: 20px">
        <button type="submit" id="submit" class="icon-rocket2 btn btn-success" value="submit" style="width: 110px; margin-left: 5px; margin-bottom: 3px;" data-loading-text=" search">
            <span class="btn-txt">search</span>                            
        </button>
    </div>
    </div>
     <div class="clearfix" style="margin-bottom: 20px"></div>
     {{ form.showSearch(class="hidden") }}
    </form>
    
    <!-- END FORM -->
    
    <hr style="margin-top: 0px;">
        
    <!-- TABLE -->
    
    {% if rows %}
    <div style="overflow-x: auto">
    <table class="table table-striped table-hover ">
            <thead>
              <tr class="success" style="white-space: nowrap">
                {% if row_header %}
                <th>{{ row_header }}</th>
                {% endif %}
                {% for header in headers %}
                <th>{{ header }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
            {% for row in rows %}
              <tr class="active">
                {% for column in row %}
                    <td>{{column}}</td>
                {% endfor %}
              </tr>
            {% endfor %}
            </tbody>
    </table>
    </div>
    
    {% endif %}
    
</div>

{% endblock %}